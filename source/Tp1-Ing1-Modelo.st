Object subclass: #CriterioBehavior	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Criterios'!!CriterioBehavior methodsFor: 'executing' stamp: 'JuanVanecek 5/7/2017 19:59'!ejecutarEn: unSimulador 	self subclassResponsibility ! !CriterioBehavior subclass: #CriterioDeConstruccion	instanceVariableNames: 'cantidadDePozosAConstruir bloqueParaObtenerParcelas bloqueParaObtenerExcavadoras'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Criterios'!!CriterioDeConstruccion methodsFor: 'initialize' stamp: 'JuanVanecek 5/7/2017 19:10'!initializeConstruir: unaCantidad 	pozosEnLasParcelasObtenidasCon: unBloque	excavadorasObtenidasCon: otroBloque	cantidadDePozosAConstruir := unaCantidad. 	bloqueParaObtenerParcelas := unBloque.	bloqueParaObtenerExcavadoras := otroBloque! !!CriterioDeConstruccion methodsFor: 'execute' stamp: 'JuanVanecek 5/7/2017 19:19'!ejecutarEn: unSimulador 		| parcelas excavadoras | 		parcelas := bloqueParaObtenerParcelas value copyFrom: 1 to: cantidadDePozosAConstruir.	excavadoras := bloqueParaObtenerExcavadoras value: unSimulador. 		self construirPozosEn: parcelas usando: excavadoras con: unSimulador ! !!CriterioDeConstruccion methodsFor: 'private' stamp: 'JuanVanecek 5/7/2017 18:56'!construirPozosEn: unaColeccionDeParcelas usando: unaColeccionDeExcavadoras con: unSimulador 		| fecha planta sistemaDeConstruccion | 		fecha := unSimulador fechaDeSimulacion. 	sistemaDeConstruccion := unSimulador sistemaDeConstruccion. 	planta := (sistemaDeConstruccion plantasProcesadorasConstruidasAl: fecha) any.	unaColeccionDeParcelas size <= unaColeccionDeExcavadoras size 		ifTrue: [			unaColeccionDeParcelas doWithIndex: [:parcela :i | 				sistemaDeConstruccion 					construirUnPozoEn: parcela 					conectadaA: planta 					con: (unaColeccionDeExcavadoras at: i)					arrancandoEl: fecha			]		 ]		ifFalse: [ self shouldBeImplemented ]! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!CriterioDeConstruccion class	instanceVariableNames: ''!!CriterioDeConstruccion class methodsFor: 'instance creation' stamp: 'JuanVanecek 5/7/2017 19:14'!construir: unaCantidad pozosEnLasParcelasMenosProfundasDe: unYacimiento 	^ self new 		initializeConstruir: unaCantidad		pozosEnLasParcelasObtenidasCon: [ 			unYacimiento parcelasDefinidas sortedAscBy: #distanciaAlReservorio ]		excavadorasObtenidasCon: [:simulador | 			simulador sistemaDeGestionDeExcavadoras excavadorasDisponibles sortedDescBy: #profundidadPorDia ]! !Object subclass: #SistemaDeEjecucionDeCriterios	instanceVariableNames: 'simulador'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Criterios'!!SistemaDeEjecucionDeCriterios methodsFor: 'private-configuring' stamp: 'JuanVanecek 5/7/2017 13:40'!initializeComoParteDe: unSimulador	super initialize. 		simulador := unSimulador. 		self configurarseEnElSimulador! !!SistemaDeEjecucionDeCriterios methodsFor: 'private-configuring' stamp: 'JuanVanecek 5/7/2017 13:39'!configurarseEnElSimulador	simulador usarComoSistemaDeEjecucionDeCriteriosA: self! !!SistemaDeEjecucionDeCriterios methodsFor: 'execute' stamp: 'JuanVanecek 5/7/2017 19:59'!ejecutar: unCriterioDeConstruccion 	unCriterioDeConstruccion ejecutarEn: simulador ! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!SistemaDeEjecucionDeCriterios class	instanceVariableNames: ''!!SistemaDeEjecucionDeCriterios class methodsFor: 'instance creation' stamp: 'JuanVanecek 5/7/2017 14:07'!comoParteDe: unSistemaDeSimulacion 	^ self new initializeComoParteDe: unSistemaDeSimulacion! !Error subclass: #ConstruccionIncompleta	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Construccion'!Error subclass: #ConstruccionInvalida	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Construccion'!Object subclass: #PlanDeConstruccion	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Construccion'!!PlanDeConstruccion methodsFor: 'Testing' stamp: 'JuanVanecek 4/9/2017 21:42'!estaTerminadoAl: aDate 	^ self fechaFinDeConstruccion < aDate! !!PlanDeConstruccion methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 18:12'!bienConstruidoOPorConstruir	self subclassResponsibility ! !!PlanDeConstruccion methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 18:33'!fechaDeInicioDeConstruccion			self subclassResponsibility ! !!PlanDeConstruccion methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 18:32'!recursosNecesarios	self subclassResponsibility ! !!PlanDeConstruccion methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 17:53'!fechaFinDeConstruccion	self subclassResponsibility ! !!PlanDeConstruccion methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 18:43'!recursosUtilizadosDurante: unaFecha	^ (unaFecha between: self fechaDeInicioDeConstruccion and: self fechaFinDeConstruccion)		ifTrue: [ self recursosNecesarios ]		ifFalse: [ #() ]! !!PlanDeConstruccion methodsFor: 'Printing' stamp: 'JuanVanecek 4/9/2017 22:17'!printOn: aStream	aStream 		nextPutAll: 			('Plan para construir {1} desde el {2}' 				format: {self bienConstruidoOPorConstruir . self fechaDeInicioDeConstruccion})! !PlanDeConstruccion subclass: #PlanDeConstruccionDePlanta	instanceVariableNames: 'plantaProcesadora fechaDeInicioDeConstruccion'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Construccion'!!PlanDeConstruccionDePlanta methodsFor: 'Initialize' stamp: 'JuanVanecek 4/9/2017 12:15'!initializeDe: unaPlantaProcesadora empezandoEl: unaFecha	plantaProcesadora := unaPlantaProcesadora.	fechaDeInicioDeConstruccion := unaFecha! !!PlanDeConstruccionDePlanta methodsFor: 'Initialize' stamp: 'JuanVanecek 4/9/2017 18:33'!fechaDeInicioDeConstruccion	^ fechaDeInicioDeConstruccion! !!PlanDeConstruccionDePlanta methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 18:33'!recursosNecesarios	^ #()! !!PlanDeConstruccionDePlanta methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 17:53'!fechaFinDeConstruccion	^ fechaDeInicioDeConstruccion addDays: plantaProcesadora tiempoDeConstruccion! !!PlanDeConstruccionDePlanta methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 18:14'!bienConstruidoOPorConstruir		^ plantaProcesadora! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!PlanDeConstruccionDePlanta class	instanceVariableNames: ''!!PlanDeConstruccionDePlanta class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 4/9/2017 17:52'!para: unaPlantaProcesadora empezandoEl: unaFecha	^ self new initializeDe: unaPlantaProcesadora empezandoEl: unaFecha! !PlanDeConstruccion subclass: #PlanDeConstruccionDePozo	instanceVariableNames: 'pozoDeExtraccion excavadora fechaDeInicioDeConstruccion'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Construccion'!!PlanDeConstruccionDePozo methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 18:33'!fechaDeInicioDeConstruccion	^ fechaDeInicioDeConstruccion! !!PlanDeConstruccionDePozo methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 18:33'!recursosNecesarios			^ Array with: excavadora ! !!PlanDeConstruccionDePozo methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 21:52'!fechaFinDeConstruccion		" El ultimo dia sigue en construccion"		^fechaDeInicioDeConstruccion 		addDays: ((pozoDeExtraccion distanciaAlReservorio / excavadora profundidadPorDia) * (1 + pozoDeExtraccion resistenciaDeLaParcela)) ceiling ! !!PlanDeConstruccionDePozo methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 18:14'!bienConstruidoOPorConstruir		^ pozoDeExtraccion! !!PlanDeConstruccionDePozo methodsFor: 'Initialize' stamp: 'JuanVanecek 4/9/2017 17:49'!initializePara: unPozoDeExtraccion cavadoCon: unaExcavadoraRig arrancandoEl: unaFecha 	pozoDeExtraccion := unPozoDeExtraccion.	excavadora := unaExcavadoraRig. 	fechaDeInicioDeConstruccion := unaFecha.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!PlanDeConstruccionDePozo class	instanceVariableNames: ''!!PlanDeConstruccionDePozo class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 4/9/2017 17:52'!para: unPozoDeExtraccion cavadoCon: unaExcavadoraRig empezandoEl: unaFecha	^ self new 		initializePara: unPozoDeExtraccion 		cavadoCon: unaExcavadoraRig 		arrancandoEl: unaFecha! !PlanDeConstruccion subclass: #PlanDeConstruccionDeTanqueDeAgua	instanceVariableNames: 'tanqueDeAgua fechaDeInicioDeConstruccion'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Construccion'!!PlanDeConstruccionDeTanqueDeAgua methodsFor: 'Initialize' stamp: 'JuanVanecek 5/1/2017 11:00'!initializeDe: unTanqueDeAlmacenamientoDeAgua empezandoEl: unaFecha	tanqueDeAgua := unTanqueDeAlmacenamientoDeAgua. 	fechaDeInicioDeConstruccion := unaFecha! !!PlanDeConstruccionDeTanqueDeAgua methodsFor: 'Accessing' stamp: 'JuanVanecek 5/1/2017 11:10'!fechaDeInicioDeConstruccion		^ fechaDeInicioDeConstruccion! !!PlanDeConstruccionDeTanqueDeAgua methodsFor: 'Accessing' stamp: 'JuanVanecek 5/1/2017 11:12'!fechaFinDeConstruccion	^ fechaDeInicioDeConstruccion addDays: (tanqueDeAgua tiempoDeConstruccion - 1)! !!PlanDeConstruccionDeTanqueDeAgua methodsFor: 'Accessing' stamp: 'JuanVanecek 5/1/2017 11:14'!recursosNecesarios			^ Array new! !!PlanDeConstruccionDeTanqueDeAgua methodsFor: 'Accessing' stamp: 'JuanVanecek 5/1/2017 11:04'!bienConstruidoOPorConstruir	^ tanqueDeAgua ! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!PlanDeConstruccionDeTanqueDeAgua class	instanceVariableNames: ''!!PlanDeConstruccionDeTanqueDeAgua class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 5/1/2017 10:59'!para: aTanqueDeAlmacenamientoDeAgua empezandoEl: unaFecha 	^ self new initializeDe: aTanqueDeAlmacenamientoDeAgua empezandoEl: unaFecha! !PlanDeConstruccion subclass: #PlanDeConstruccionDeTanqueDeGas	instanceVariableNames: 'tanqueDeGas fechaDeInicioDeConstruccion'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Construccion'!!PlanDeConstruccionDeTanqueDeGas methodsFor: 'Initialize' stamp: 'JuanVanecek 5/1/2017 11:22'!initializeDe: unTanqueDeGas empezandoEl: unaFecha	tanqueDeGas := unTanqueDeGas. 	fechaDeInicioDeConstruccion := unaFecha! !!PlanDeConstruccionDeTanqueDeGas methodsFor: 'Accessing' stamp: 'JuanVanecek 5/1/2017 11:23'!bienConstruidoOPorConstruir	^ tanqueDeGas ! !!PlanDeConstruccionDeTanqueDeGas methodsFor: 'Accessing' stamp: 'JuanVanecek 5/7/2017 18:03'!fechaDeInicioDeConstruccion	^ fechaDeInicioDeConstruccion! !!PlanDeConstruccionDeTanqueDeGas methodsFor: 'Accessing' stamp: 'JuanVanecek 5/1/2017 11:22'!fechaFinDeConstruccion	^ fechaDeInicioDeConstruccion addDays: (tanqueDeGas tiempoDeConstruccion - 1)! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!PlanDeConstruccionDeTanqueDeGas class	instanceVariableNames: ''!!PlanDeConstruccionDeTanqueDeGas class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 5/1/2017 11:20'!para: unTanqueDeGas empezandoEl: unaFecha	^ self new initializeDe: unTanqueDeGas empezandoEl: unaFecha! !Object subclass: #SistemaDeConstruccionDePozos	instanceVariableNames: 'planesDeConstruccion calculadoraDePresion eventosSobrePozos'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Construccion'!!SistemaDeConstruccionDePozos methodsFor: 'testing' stamp: 'JuanVanecek 4/9/2017 18:50'!estaDisponible: unaExcavadoraRig el: unaFecha 	^ planesDeConstruccion allSatisfy: [:plan | ((plan recursosUtilizadosDurante: unaFecha) includes: unaExcavadoraRig) not ]! !!SistemaDeConstruccionDePozos methodsFor: 'private' stamp: 'JuanVanecek 5/7/2017 18:04'!agregarSiEsUnPlanValido: unPlanDeConstruccion	self asertarQueLosRecursosNoSonUtilizados: unPlanDeConstruccion.		planesDeConstruccion add: unPlanDeConstruccion.		^ unPlanDeConstruccion bienConstruidoOPorConstruir ! !!SistemaDeConstruccionDePozos methodsFor: 'private' stamp: 'JuanVanecek 5/7/2017 18:28'!asertarQueLosRecursosNoSonUtilizados: unPlanDeConstruccion		| duracionPlan | 	duracionPlan := 		unPlanDeConstruccion fechaDeInicioDeConstruccion to: unPlanDeConstruccion fechaFinDeConstruccion.		planesDeConstruccion do: [:plan | | duracionDePlanExistente  | 		duracionDePlanExistente := plan fechaDeInicioDeConstruccion to: plan fechaFinDeConstruccion.				((plan recursosNecesarios intersection: unPlanDeConstruccion recursosNecesarios) isNotEmpty			and: [(duracionDePlanExistente intersection: duracionPlan) isNotNil])				ifTrue: [ 					ConstruccionInvalida signal: ('Los recursos se solapan con los de {1}' format: {plan}) ]]	! !!SistemaDeConstruccionDePozos methodsFor: 'private' stamp: 'JuanVanecek 5/7/2017 18:57'!filrarBienesDeTipo: tipoDeBien construidosLuegoDe: unaFecha	^ planesDeConstruccion		select: [ :plan | 			(plan bienConstruidoOPorConstruir isKindOf: tipoDeBien) and: [ plan estaTerminadoAl: unaFecha ] ]		thenCollect: [ :plan | plan bienConstruidoOPorConstruir ]! !!SistemaDeConstruccionDePozos methodsFor: 'private' stamp: 'JuanVanecek 5/1/2017 13:30'!estaConstruido: unBien al: unaFecha	^ (self filrarBienesDeTipo: unBien class construidosLuegoDe: unaFecha) includes: unBien! !!SistemaDeConstruccionDePozos methodsFor: 'accessing-bienes construidos' stamp: 'JuanVanecek 5/1/2017 13:31'!plantasProcesadorasConstruidasAl: unaFecha 		^ self filrarBienesDeTipo: PlantaProcesadora construidosLuegoDe: unaFecha! !!SistemaDeConstruccionDePozos methodsFor: 'accessing-bienes construidos' stamp: 'JuanVanecek 5/1/2017 13:31'!pozosConstruidosAl: unaFecha 	^ self filrarBienesDeTipo: PozoDeExtraccion construidosLuegoDe: unaFecha! !!SistemaDeConstruccionDePozos methodsFor: 'accessing-bienes construidos' stamp: 'JuanVanecek 5/1/2017 13:32'!tanquesDeAguaConstruidosAl: unaFecha	^ self filrarBienesDeTipo: TanqueDeAgua construidosLuegoDe: unaFecha 	! !!SistemaDeConstruccionDePozos methodsFor: 'accessing-bienes construidos' stamp: 'JuanVanecek 5/1/2017 13:32'!tanquesDeGasConstruidosAl: unaFecha	^ self filrarBienesDeTipo: TanqueDeGas construidosLuegoDe: unaFecha! !!SistemaDeConstruccionDePozos methodsFor: 'accessing-construccion' stamp: 'JuanVanecek 5/7/2017 17:52'!construirUnPozoEn: unaParcelaDeYacimiento conectadaA: unaPlantaProcesadora con: unaExcavadoraRig arrancandoEl: unaFecha 	| plan | 		plan := PlanDeConstruccionDePozo 		para: (PozoDeExtraccion en: unaParcelaDeYacimiento conectadaA: unaPlantaProcesadora) 		cavadoCon: unaExcavadoraRig 		empezandoEl: unaFecha.		^ self agregarSiEsUnPlanValido: plan! !!SistemaDeConstruccionDePozos methodsFor: 'accessing-construccion' stamp: 'JuanVanecek 5/7/2017 17:52'!construirTanqueDeGas: unTanqueDeGas empezandoEl: unaFecha	^ self agregarSiEsUnPlanValido: (		PlanDeConstruccionDeTanqueDeGas			para: unTanqueDeGas			empezandoEl: unaFecha)! !!SistemaDeConstruccionDePozos methodsFor: 'accessing-construccion' stamp: 'JuanVanecek 5/7/2017 17:52'!construirUnaPlantaProcesadora: unaPlantaProcesadora arrancandoEl: unaFecha 	^ self agregarSiEsUnPlanValido: (		PlanDeConstruccionDePlanta			para: unaPlantaProcesadora			empezandoEl: unaFecha)! !!SistemaDeConstruccionDePozos methodsFor: 'accessing-construccion' stamp: 'JuanVanecek 5/7/2017 17:52'!construirTanqueDeAgua: aTanqueDeAlmacenamientoDeAgua empezandoEl: unaFecha	^ self agregarSiEsUnPlanValido: (		PlanDeConstruccionDeTanqueDeAgua			para: aTanqueDeAlmacenamientoDeAgua			empezandoEl: unaFecha) ! !!SistemaDeConstruccionDePozos methodsFor: 'accessing-construccion' stamp: 'JuanVanecek 5/1/2017 15:04'!fechaDeFinConstruccionDe: unPozoDeExtraccion 	^ planesDeConstruccion 		detect: [:plan | plan bienConstruidoOPorConstruir = unPozoDeExtraccion ]		ifFound: [:plan | plan fechaFinDeConstruccion ]		ifNone: [ Exception signal: ('Este simulador no construyo {1}' format: { unPozoDeExtraccion }) ]! !!SistemaDeConstruccionDePozos methodsFor: 'initialize' stamp: 'JuanVanecek 5/7/2017 06:38'!initializeComoParteDe: aSistemaDeSimulacion 	super initialize. 		aSistemaDeSimulacion usarComoSistemaDeConstruccionA: self.	planesDeConstruccion := OrderedCollection new.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!SistemaDeConstruccionDePozos class	instanceVariableNames: ''!!SistemaDeConstruccionDePozos class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 5/7/2017 06:37'!comoParteDe: aSistemaDeSimulacion 		^ self new initializeComoParteDe: aSistemaDeSimulacion ! !!SistemaDeConstruccionDePozos class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 5/1/2017 13:52'!calcuandoPresionCon: unaCalculadoraDePresiones 	^ self new initializeCalcuandoPresionCon: unaCalculadoraDePresiones ! !Object subclass: #MantoGeologico	instanceVariableNames: 'nombre resistencia'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Objetos Basicos'!!MantoGeologico methodsFor: 'Initialize' stamp: 'JuanVanecek 4/9/2017 17:32'!initializeConocidoComo: unNombre ofreciendoUnaResistenciaDel: unPorcentaje	nombre := unNombre. 	resistencia := unPorcentaje! !!MantoGeologico methodsFor: 'Printing' stamp: 'JuanVanecek 4/9/2017 22:07'!printOn: aStream	aStream nextPutAll: ('{1} (Resistencia {2}%)' format: { nombre . resistencia } )! !!MantoGeologico methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 21:52'!resistenciaTerreno	^ resistencia! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!MantoGeologico class	instanceVariableNames: ''!!MantoGeologico class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 4/9/2017 17:31'!conocidoComo: unNombre ofreciendoUnaResistenciaDel: unPorcentaje	^ self new initializeConocidoComo: unNombre ofreciendoUnaResistenciaDel: unPorcentaje! !Object subclass: #ParcelaDeYacimiento	instanceVariableNames: 'presionInicial profundidadDeReservorio mantoGeologico yacimiento'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Objetos Basicos'!!ParcelaDeYacimiento methodsFor: 'Printing' stamp: 'JuanVanecek 4/9/2017 22:16'!printOn: aStream	aStream 		nextPutAll:			('Parcela de tipo {1} con reservorio a {2} mts y presion {3} PSIA' 				format: {mantoGeologico . profundidadDeReservorio . presionInicial})	! !!ParcelaDeYacimiento methodsFor: 'Initialize' stamp: 'JuanVanecek 5/1/2017 16:49'!initializeDeTipo: aMantoGeologico 	conPresionInicial: unaMedidaDePresion 	profunidadEnMetros: unaMedidaDeDistancia	alReservorioEn: unYacimiento		mantoGeologico := aMantoGeologico.	presionInicial := unaMedidaDePresion.	profundidadDeReservorio := unaMedidaDeDistancia.	yacimiento := unYacimiento ! !!ParcelaDeYacimiento methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 18:09'!distanciaAlReservorio	^ profundidadDeReservorio ! !!ParcelaDeYacimiento methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 21:51'!resistenciaTerreno	^ mantoGeologico resistenciaTerreno! !!ParcelaDeYacimiento methodsFor: 'Accessing' stamp: 'JuanVanecek 5/1/2017 16:47'!yacimiento	^ yacimiento! !!ParcelaDeYacimiento methodsFor: 'Accessing' stamp: 'JuanVanecek 5/1/2017 13:54'!presionInicial		^ presionInicial! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!ParcelaDeYacimiento class	instanceVariableNames: ''!!ParcelaDeYacimiento class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 5/1/2017 16:49'!deTipo: unMantoGeologico  	conPresionInicial: unaMedidaDePresion 	profunidadEnMetros: unaMedidaDeDistancia	alReservorioEn: unYacimiento		^self new 		initializeDeTipo: unMantoGeologico		conPresionInicial: unaMedidaDePresion 		profunidadEnMetros: unaMedidaDeDistancia		alReservorioEn: unYacimiento! !Object subclass: #PlantaProcesadora	instanceVariableNames: 'tiempoDeConstruccion costoDeConstruccion procesamientoDiario tanqueDeAlmacenamientos'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Objetos Basicos'!!PlantaProcesadora methodsFor: 'Initialize' stamp: 'JuanVanecek 4/9/2017 11:11'!initializeConstruidaEnDias: unaCantidadDeDias 	conUnCostoTotalDe: unPrecio 	procesandoUnVolumenDiarioDe: unaCantidadDeVolumen		tiempoDeConstruccion := unaCantidadDeDias. 	costoDeConstruccion := unPrecio. 	procesamientoDiario := unaCantidadDeVolumen.	tanqueDeAlmacenamientos := OrderedCollection new.! !!PlantaProcesadora methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 11:12'!tanquesDeAlmacenamiento	^ tanqueDeAlmacenamientos ! !!PlantaProcesadora methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 12:19'!tiempoDeConstruccion		^ tiempoDeConstruccion ! !!PlantaProcesadora methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 11:11'!conectar: aTanqueDeAlmacenamiento	tanqueDeAlmacenamientos add: aTanqueDeAlmacenamiento! !!PlantaProcesadora methodsFor: 'Printing' stamp: 'JuanVanecek 4/9/2017 22:22'!printOn: aStream 	aStream nextPutAll: ('Planta Procesadora con procesamiento de {1} cm3/dia' format: {procesamientoDiario})! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!PlantaProcesadora class	instanceVariableNames: ''!!PlantaProcesadora class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 4/9/2017 10:37'!construidaEnDias: unaCantidadDeDias 	conUnCostoTotalDe: unPrecio 	procesandoUnVolumenDiarioDe: unaCantidadDeVolumen		^ self new 		initializeConstruidaEnDias: unaCantidadDeDias 		conUnCostoTotalDe: unPrecio 		procesandoUnVolumenDiarioDe: unaCantidadDeVolumen! !Object subclass: #PozoDeExtraccion	instanceVariableNames: 'parcelaDeYacimiento plantaProcesadora'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Objetos Basicos'!!PozoDeExtraccion methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 18:08'!distanciaAlReservorio	^ parcelaDeYacimiento distanciaAlReservorio! !!PozoDeExtraccion methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 21:51'!resistenciaDeLaParcela	^ parcelaDeYacimiento resistenciaTerreno! !!PozoDeExtraccion methodsFor: 'Accessing' stamp: 'JuanVanecek 5/1/2017 16:47'!yacimiento		^ parcelaDeYacimiento yacimiento! !!PozoDeExtraccion methodsFor: 'Accessing' stamp: 'JuanVanecek 5/1/2017 13:54'!presionInicial		^ parcelaDeYacimiento presionInicial! !!PozoDeExtraccion methodsFor: 'Initialize' stamp: 'JuanVanecek 4/9/2017 17:46'!initializeEn: unaParcelaDeYacimiento conectadaA: unaPlantaProcesadora 		parcelaDeYacimiento := unaParcelaDeYacimiento.	plantaProcesadora := unaPlantaProcesadora! !!PozoDeExtraccion methodsFor: 'Printing' stamp: 'JuanVanecek 4/9/2017 22:18'!printOn: aStream	aStream nextPutAll: ('Pozo de extraccion en {1}' format: { parcelaDeYacimiento })! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!PozoDeExtraccion class	instanceVariableNames: ''!!PozoDeExtraccion class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 4/9/2017 17:46'!en: unaParcelaDeYacimiento conectadaA: unaPlantaProcesadora 	^ self new initializeEn: unaParcelaDeYacimiento conectadaA: unaPlantaProcesadora! !Object subclass: #TanqueDeAlmacenamiento	instanceVariableNames: 'plantaProcesadora capacidadTotal tiempoDeConstruccion costoDeConstruccion'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Objetos Basicos'!!TanqueDeAlmacenamiento methodsFor: 'Initialize' stamp: 'JuanVanecek 4/9/2017 11:27'!initializeConstruidaEnDias: unaCantidadDeDias	conUnCostoTotalDe: unPrecio	conectadoA: unaPlantaProcesadora 	conCapacidadDe: unaCantidadDeVolumen 		tiempoDeConstruccion := unaCantidadDeDias.	costoDeConstruccion := unPrecio.	plantaProcesadora := unaPlantaProcesadora		conectar: self;		yourself.	capacidadTotal := unaCantidadDeVolumen.		! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!TanqueDeAlmacenamiento class	instanceVariableNames: ''!!TanqueDeAlmacenamiento class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 4/9/2017 11:27'!construidaEnDias: unaCantidadDeDias	conUnCostoTotalDe: unPrecio	conectadoA: unaPlantaProcesadora 	conCapacidadDe: unaCantidadDeVolumen 		^ self new 		initializeConstruidaEnDias: unaCantidadDeDias		conUnCostoTotalDe: unPrecio		conectadoA: unaPlantaProcesadora 		conCapacidadDe: unaCantidadDeVolumen ! !TanqueDeAlmacenamiento subclass: #TanqueDeAgua	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Objetos Basicos'!!TanqueDeAgua methodsFor: 'Accessing' stamp: 'JuanVanecek 5/1/2017 11:05'!tiempoDeConstruccion	^ tiempoDeConstruccion ! !TanqueDeAlmacenamiento subclass: #TanqueDeGas	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Objetos Basicos'!!TanqueDeGas methodsFor: 'Accessing' stamp: 'JuanVanecek 5/1/2017 11:23'!tiempoDeConstruccion	^ tiempoDeConstruccion ! !Object subclass: #Yacimiento	instanceVariableNames: 'tamanio porcentajeDeAgua porcentajeDeGas porcentajeDePetroleo parcelasLibres volumenInicial parcelasDefinidas'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Objetos Basicos'!!Yacimiento methodsFor: 'initialize' stamp: 'JuanVanecek 5/7/2017 14:45'!initializeDeTamanioEnHectareas: unasHectareas	volumenDeProducto: unVolumen	compuestoPorAguaEn: unPorcentajeDeAgua	porGasEn: unPorcentajeDeGas	yEnPetroleo: unPorcentajeDePetroleo		tamanio := unasHectareas.	volumenInicial := unVolumen.	porcentajeDeAgua := unPorcentajeDeAgua.	porcentajeDeGas := unPorcentajeDeGas.	porcentajeDePetroleo := unPorcentajeDePetroleo.	parcelasDefinidas := OrderedCollection new.! !!Yacimiento methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 14:43'!parcelasDefinidas	^ parcelasDefinidas! !!Yacimiento methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 14:45'!parcelaLibreDeTipo: unMantoGeologico	presionInicial: unCantidadDePresion 	yDistanciaAlReservorio: unaDistanciaEnMetros	^parcelasDefinidas size < tamanio		ifTrue: [ 			parcelasDefinidas add: (				ParcelaDeYacimiento 					deTipo: unMantoGeologico					conPresionInicial: unCantidadDePresion 					profunidadEnMetros: unaDistanciaEnMetros					alReservorioEn: self).		 ]		ifFalse: [ 			AssertionFailure signal: 'No hay más parcelas disponibles para este yacimiento' ]! !!Yacimiento methodsFor: 'accessing' stamp: 'JuanVanecek 5/1/2017 16:49'!volumenDeProductoInicial	^ volumenInicial ! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Yacimiento class	instanceVariableNames: ''!!Yacimiento class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 5/1/2017 16:05'!deTamanioEnHectareas: unasHectareas	volumenDeProducto: unVolumen	compuestoPorAguaEn: unPorcentajeDeAgua	porGasEn: unPorcentajeDeGas	yEnPetroleo: unPorcentajeDePetroleo		self 		assertSumanCien: (Array with: unPorcentajeDeAgua with: unPorcentajeDeGas with: unPorcentajeDePetroleo);		assertCantidadAdecuadaDeProducto: unVolumen.		^self new		initializeDeTamanioEnHectareas: unasHectareas		volumenDeProducto: unVolumen		compuestoPorAguaEn: unPorcentajeDeAgua		porGasEn: unPorcentajeDeGas		yEnPetroleo: unPorcentajeDePetroleo! !!Yacimiento class methodsFor: 'Asserting' stamp: 'JuanVanecek 4/9/2017 22:25'!assertSumanCien: aNumberCollection 	(self sumOfAll: aNumberCollection startingWith: 0) = 100 		ifFalse: [AssertionFailure signal: 'Los compuestos tienen que sumar el 100% del reservorio'].! !!Yacimiento class methodsFor: 'Asserting' stamp: 'JuanVanecek 5/1/2017 16:09'!assertCantidadAdecuadaDeProducto: unVolumen		^ (unVolumen between: self minimaCantidadDeProducto and: self maximaCantidadDeProducto)		ifFalse: [ AssertionFailure signal: (			'La cantidad de producto tiene que estar entre {1} y {2} m3' format: { self minimaCantidadDeProducto . self maximaCantidadDeProducto })]! !!Yacimiento class methodsFor: 'Accessing' stamp: 'JuanVanecek 4/9/2017 22:25'!sumOfAll: aCollection startingWith: aSeed 	^ aCollection 		inject: aSeed		into: [:accumulatedValue :addend | accumulatedValue + addend]! !!Yacimiento class methodsFor: 'Accessing' stamp: 'JuanVanecek 5/1/2017 16:07'!maximaCantidadDeProducto		^ 1000000000! !!Yacimiento class methodsFor: 'Accessing' stamp: 'JuanVanecek 5/1/2017 16:07'!minimaCantidadDeProducto		^ 10000000! !Object subclass: #ObjetoConfiguradoBehavior	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Utility'!!ObjetoConfiguradoBehavior methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 06:54'!objetoConfigurado	self subclassResponsibility ! !ObjetoConfiguradoBehavior subclass: #ObjetoConfigurado	instanceVariableNames: 'objetoConfigurado'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Utility'!!ObjetoConfigurado methodsFor: 'Initialize' stamp: 'JuanVanecek 5/7/2017 06:42'!initializeCon: unObjeto	super initialize. 		objetoConfigurado := unObjeto	! !!ObjetoConfigurado methodsFor: 'Initialize' stamp: 'JuanVanecek 5/7/2017 06:55'!objetoConfigurado	^ objetoConfigurado! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!ObjetoConfigurado class	instanceVariableNames: ''!!ObjetoConfigurado class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 5/7/2017 06:41'!con: unObjeto		^ self new initializeCon: unObjeto! !ObjetoConfiguradoBehavior subclass: #ObjetoSinConfigurar	instanceVariableNames: 'mensajeDeError'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Utility'!!ObjetoSinConfigurar methodsFor: 'initialize' stamp: 'JuanVanecek 5/7/2017 06:57'!initializeConMensajeDeError: unMensajeDeError 		super initialize.		mensajeDeError := unMensajeDeError! !!ObjetoSinConfigurar methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 07:27'!objetoConfigurado		^ Error signal: mensajeDeError ! !!ObjetoSinConfigurar methodsFor: 'printing' stamp: 'JuanVanecek 5/7/2017 07:24'!printOn: aStream	aStream nextPutAll: mensajeDeError! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!ObjetoSinConfigurar class	instanceVariableNames: ''!!ObjetoSinConfigurar class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 5/7/2017 06:56'!cuandoSePida: unMensaje	^ self new initializeConMensajeDeError: unMensaje! !Object subclass: #SistemaDeSimulacion	instanceVariableNames: 'sistemaDeConstruccionConfigurado sistemaDeEjecucionDeCriteriosConfigurado sistemaDeExtraccionConfigurado sistemaDeGestionDeExcavadorasConfigurado'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Simulador'!!SistemaDeSimulacion methodsFor: 'initialize' stamp: 'JuanVanecek 5/7/2017 14:17'!initialize	super initialize. 		sistemaDeConstruccionConfigurado := 		ObjetoSinConfigurar cuandoSePida: 'No se configuró el sistema de construcción'.	sistemaDeExtraccionConfigurado := 		ObjetoSinConfigurar cuandoSePida: 'No se configuró el sistema de extracción'.	sistemaDeEjecucionDeCriteriosConfigurado := 		ObjetoSinConfigurar cuandoSePida: 'No se configuró el sistema de ejecución de criterios'.	sistemaDeGestionDeExcavadorasConfigurado := 		ObjetoSinConfigurar cuandoSePida: 'No se configuró el sistema de gestión de excavadoras'.! !!SistemaDeSimulacion methodsFor: 'configuring' stamp: 'JuanVanecek 5/7/2017 14:08'!usarComoSistemaDeEjecucionDeCriteriosA: unSistemaDeEjecucionDeCriterios 	sistemaDeEjecucionDeCriteriosConfigurado := ObjetoConfigurado con: unSistemaDeEjecucionDeCriterios! !!SistemaDeSimulacion methodsFor: 'configuring' stamp: 'JuanVanecek 5/7/2017 14:18'!usarComoSistemaDeGestionDeExcavadorasA: unSistemaDeGestionDeExcavadoras 	sistemaDeGestionDeExcavadorasConfigurado := ObjetoConfigurado con: unSistemaDeGestionDeExcavadoras ! !!SistemaDeSimulacion methodsFor: 'configuring' stamp: 'JuanVanecek 5/7/2017 06:45'!usarComoSistemaDeExtraccionA: unSistemaDeExtraccionDePozos 	sistemaDeExtraccionConfigurado := ObjetoConfigurado con: unSistemaDeExtraccionDePozos! !!SistemaDeSimulacion methodsFor: 'configuring' stamp: 'JuanVanecek 5/7/2017 06:41'!usarComoSistemaDeConstruccionA: unSistemaDeConstruccionDePozos 	sistemaDeConstruccionConfigurado := ObjetoConfigurado con: unSistemaDeConstruccionDePozos ! !!SistemaDeSimulacion methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 07:07'!sistemaDeExtraccion	^ sistemaDeExtraccionConfigurado objetoConfigurado ! !!SistemaDeSimulacion methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 14:58'!fechaDeSimulacion	^ Date today! !!SistemaDeSimulacion methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 07:09'!sistemaDeConstruccion	^ sistemaDeConstruccionConfigurado objetoConfigurado ! !!SistemaDeSimulacion methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 14:17'!sistemaDeGestionDeExcavadoras	^ sistemaDeGestionDeExcavadorasConfigurado objetoConfigurado ! !!SistemaDeSimulacion methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 13:22'!sistemaDeEjecucionDeCriterios	^ sistemaDeEjecucionDeCriteriosConfigurado objetoConfigurado ! !Object subclass: #CatalogoDeExcavadorasRig	instanceVariableNames: 'catalogo'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Excavadoras'!!CatalogoDeExcavadorasRig methodsFor: 'accessing' stamp: 'JuanVanecek 4/8/2017 13:22'!registrar: unaExcavadoraRig aUnCostoPorDia: unPrecio porUnMinimoDeDias: unaCantidadDeDias	catalogo at: unaExcavadoraRig put: ((Array new: 2)		at: self indicePrecio put: unPrecio;		at: self indiceAlquilerMinimo put: unaCantidadDeDias;		yourself	)! !!CatalogoDeExcavadorasRig methodsFor: 'accessing' stamp: 'JuanVanecek 4/8/2017 13:27'!conLosRegistrosHacer: aBlockClosure 	catalogo keysAndValuesDo: [:excavadora :datosAlquiler | 		aBlockClosure 			value: excavadora 			value: (datosAlquiler at: self indicePrecio)			value: (datosAlquiler at: self indiceAlquilerMinimo)		 ]! !!CatalogoDeExcavadorasRig methodsFor: 'accessing' stamp: 'JuanVanecek 4/8/2017 13:24'!excavadorasDisponibles	^ catalogo keys! !!CatalogoDeExcavadorasRig methodsFor: 'private' stamp: 'JuanVanecek 4/8/2017 13:24'!indiceAlquilerMinimo	^ 2! !!CatalogoDeExcavadorasRig methodsFor: 'private' stamp: 'JuanVanecek 4/8/2017 13:23'!indicePrecio	^ 1! !!CatalogoDeExcavadorasRig methodsFor: 'initialize' stamp: 'JuanVanecek 4/8/2017 13:23'!initialize	super initialize. 		catalogo := Dictionary new.! !Object subclass: #ExcavadoraRig	instanceVariableNames: 'profundidadPorDia consumoPorDia'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Excavadoras'!!ExcavadoraRig methodsFor: 'printing' stamp: 'JuanVanecek 4/9/2017 22:09'!printOn: aStream	aStream 		nextPutAll: 			('Excavadora que procesa {1} mts/dia consumiendo {2} lts/dia' 				format: { profundidadPorDia . consumoPorDia  })! !!ExcavadoraRig methodsFor: 'initialize' stamp: 'JuanVanecek 4/8/2017 13:20'!initializePerforandoEnMetrosEnUnDia: unaMedidaEnMetros consumiendoEnLitros: unaMedidaEnLitros	profundidadPorDia := unaMedidaEnMetros.	consumoPorDia := unaMedidaEnLitros.! !!ExcavadoraRig methodsFor: 'accessing' stamp: 'JuanVanecek 4/9/2017 18:09'!profundidadPorDia	^ profundidadPorDia! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!ExcavadoraRig class	instanceVariableNames: ''!!ExcavadoraRig class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 4/8/2017 13:19'!perforandoEnMetrosEnUnDia: unaMedidaEnMetros consumiendoEnLitros: unaMedidaEnLitros	^ self new 		initializePerforandoEnMetrosEnUnDia: unaMedidaEnMetros		consumiendoEnLitros: unaMedidaEnLitros! !Object subclass: #SistemaDeGestionDeExcavadoras	instanceVariableNames: 'catalogo'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Excavadoras'!!SistemaDeGestionDeExcavadoras methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 14:24'!registrar: unaExcavadoraRig conUnCostoPorDia: unPrecio porUnMinimoDeDias: unaCantidadDeDias 	catalogo at: unaExcavadoraRig put: ((Array new: 2)		at: self indicePrecio put: unPrecio;		at: self indiceAlquilerMinimo put: unaCantidadDeDias;		yourself	)! !!SistemaDeGestionDeExcavadoras methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 14:25'!excavadorasDisponibles	^ catalogo keys! !!SistemaDeGestionDeExcavadoras methodsFor: 'private' stamp: 'JuanVanecek 5/7/2017 14:25'!indiceAlquilerMinimo	^ 2! !!SistemaDeGestionDeExcavadoras methodsFor: 'private' stamp: 'JuanVanecek 5/7/2017 14:25'!indicePrecio	^ 1! !!SistemaDeGestionDeExcavadoras methodsFor: 'initialize' stamp: 'JuanVanecek 5/7/2017 14:24'!initializeComoParteDe: unSistemaDeSimulacion 	super initialize. 		unSistemaDeSimulacion usarComoSistemaDeGestionDeExcavadorasA: self.		catalogo := Dictionary new.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!SistemaDeGestionDeExcavadoras class	instanceVariableNames: ''!!SistemaDeGestionDeExcavadoras class methodsFor: 'instance creation' stamp: 'JuanVanecek 5/7/2017 14:15'!comoParteDe: unSistemaDeSimulacion 	^ self new initializeComoParteDe: unSistemaDeSimulacion! !Object subclass: #CalculadoraDefaultDePresiones	instanceVariableNames: 'alpha1 alpha2'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Extraccion'!!CalculadoraDefaultDePresiones methodsFor: 'private' stamp: 'JuanVanecek 5/7/2017 07:44'!cantidadDePozosHabilitadosEn: unSimulador a: unaFecha	" Pongo max: 1 porque no se que hacer cuando al dia anterior no se extrajo nada - juan"	^ (unSimulador sistemaDeExtraccion cantidadDePozosHabilitadosA: unaFecha) max: 1! !!CalculadoraDefaultDePresiones methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 19:21'!potencialDiarioDe: unPozoDeExtraccion al: unaFecha usando: unSimulador		| presionPonderada sistemaExtraccion | 		sistemaExtraccion := unSimulador sistemaDeExtraccion. 	presionPonderada := 		(sistemaExtraccion presionDe: unPozoDeExtraccion a: unaFecha) / 		(self cantidadDePozosHabilitadosEn: unSimulador a: unaFecha).		^ alpha1 * presionPonderada + (alpha2 * (presionPonderada ** 2))! !!CalculadoraDefaultDePresiones methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 19:21'!presionDe: unPozoDeExtraccion a: unaFecha usando: unSimulador 		| sistemaDeConstruccion sistemaDeExtraccion | 		sistemaDeConstruccion := unSimulador sistemaDeConstruccion.	sistemaDeExtraccion := unSimulador sistemaDeExtraccion.		" Se puede extraer recien el primer dia despues de construido, y ese dia aun tiene como presion a la inicial - juan"	^ unaFecha <= ((sistemaDeConstruccion fechaDeFinConstruccionDe: unPozoDeExtraccion) addDays: 1)		ifTrue: [ unPozoDeExtraccion presionInicial ] 		ifFalse: [ | fechaAnterior presionAlDiaAnterior cocienteVolumen pozosHabilitados beta | 			fechaAnterior := unaFecha previous. 			presionAlDiaAnterior := sistemaDeExtraccion presionDe: unPozoDeExtraccion a: fechaAnterior.				cocienteVolumen := 				(sistemaDeExtraccion volumenReservorioDe: unPozoDeExtraccion al: fechaAnterior) / 				(sistemaDeExtraccion volumenInicialDelReservorioDe: unPozoDeExtraccion).					beta := 0.1 * cocienteVolumen / (self cantidadDePozosHabilitadosEn: unSimulador a: fechaAnterior).					presionAlDiaAnterior / (Float e ** beta)]! !!CalculadoraDefaultDePresiones methodsFor: 'initialize' stamp: 'JuanVanecek 5/1/2017 13:51'!initializeUsandoComoAlpha1: aNumber comoAlpha2: anotherNumber 		alpha1 := aNumber. 	alpha2 := anotherNumber! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!CalculadoraDefaultDePresiones class	instanceVariableNames: ''!!CalculadoraDefaultDePresiones class methodsFor: 'Asserting' stamp: 'JuanVanecek 5/1/2017 13:50'!assert: aNumber between: aLowerBound and: anUpperBound		(aNumber between: aLowerBound and: anUpperBound)		ifFalse: [ 			Exception signal: ('El valor debe estar entre {1} y {2}' format: { aLowerBound . anUpperBound } )]! !!CalculadoraDefaultDePresiones class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 5/1/2017 13:49'!usandoComoAlpha1: alpha1 comoAlpha2: alpha2		self 		assert: alpha1 between: 0.1 and: 0.6;		assert: alpha2 between: 0.005 and: 0.01.			^ self new initializeUsandoComoAlpha1: alpha1 comoAlpha2: alpha2! !Object subclass: #EventoDeExtraccion	instanceVariableNames: 'pozo fechaDeExtraccion'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Extraccion'!!EventoDeExtraccion methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 19:28'!printOn: aStream	aStream nextPutAll: ('Extracción al {1} de {2}' format: { fechaDeExtraccion . pozo })! !!EventoDeExtraccion methodsFor: 'accessing' stamp: 'JuanVanecek 5/1/2017 15:06'!fechaDeExtraccion		^ fechaDeExtraccion! !!EventoDeExtraccion methodsFor: 'accessing' stamp: 'JuanVanecek 5/1/2017 15:07'!pozo		^ pozo! !!EventoDeExtraccion methodsFor: 'instance creation' stamp: 'JuanVanecek 5/1/2017 14:21'!initializeEn: unPozoDeExtraccion al: unFecha	pozo := unPozoDeExtraccion. 	fechaDeExtraccion := unFecha! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!EventoDeExtraccion class	instanceVariableNames: ''!!EventoDeExtraccion class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 5/1/2017 14:16'!en: unPozoDeExtraccion al: unFecha		^ self new initializeEn: unPozoDeExtraccion al: unFecha! !Object subclass: #SistemaDeExtraccionDePozos	instanceVariableNames: 'calculadoraDePresion eventosSobrePozos simulador'	classVariableNames: ''	poolDictionaries: ''	category: 'Tp1-Ing1-Modelo-Extraccion'!!SistemaDeExtraccionDePozos methodsFor: 'accessing-mediciones' stamp: 'JuanVanecek 5/7/2017 06:24'!volumenInicialDelReservorioDe: unPozoDeExtraccion 	^ unPozoDeExtraccion yacimiento volumenDeProductoInicial ! !!SistemaDeExtraccionDePozos methodsFor: 'accessing-mediciones' stamp: 'JuanVanecek 5/7/2017 19:21'!presionDe: unPozoDeExtraccion a: unaFecha	^ calculadoraDePresion presionDe: unPozoDeExtraccion a: unaFecha usando: simulador! !!SistemaDeExtraccionDePozos methodsFor: 'accessing-mediciones' stamp: 'JuanVanecek 5/7/2017 07:03'!potencialDiarioDe: unPozoDeExtraccion al: unaFecha	^ calculadoraDePresion potencialDiarioDe: unPozoDeExtraccion al: unaFecha usando: simulador! !!SistemaDeExtraccionDePozos methodsFor: 'accessing-mediciones' stamp: 'JuanVanecek 5/7/2017 12:51'!volumenReservorioDe: unPozoDeExtraccion al: unaFecha		| yacimiento | 		yacimiento := unPozoDeExtraccion yacimiento.	^ yacimiento volumenDeProductoInicial - (self volumenExtraidoDe: yacimiento a: unaFecha)! !!SistemaDeExtraccionDePozos methodsFor: 'accessing-mediciones' stamp: 'JuanVanecek 5/7/2017 12:51'!volumenExtraidoDe: unYacimiento a: unaFecha 	| extraccionesEnYacimiento | 		extraccionesEnYacimiento := eventosSobrePozos select: [:evento | 		evento fechaDeExtraccion <= unaFecha and: [evento pozo yacimiento = unYacimiento]].		^ extraccionesEnYacimiento		inject: 0 		into: [:total :extraccion | total + (self potencialDiarioDe: extraccion pozo al: unaFecha)]! !!SistemaDeExtraccionDePozos methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 08:24'!extraerProductoDe: unPozoDeExtraccion en: unaFecha 		self assert: unPozoDeExtraccion estaConstruidoAl: unaFecha.		eventosSobrePozos add: (EventoDeExtraccion en: unPozoDeExtraccion al: unaFecha)! !!SistemaDeExtraccionDePozos methodsFor: 'accessing' stamp: 'JuanVanecek 5/7/2017 07:07'!cantidadDePozosHabilitadosA: unaFecha 	^ (eventosSobrePozos select: [:evento | evento fechaDeExtraccion = unaFecha ]) size! !!SistemaDeExtraccionDePozos methodsFor: 'initialize' stamp: 'JuanVanecek 5/7/2017 07:01'!initializeComoParteDe: unSistemaDeSimulacion calcuandoPresionCon: aCalculadoraDefaultDePresiones 		super initialize.	simulador := unSistemaDeSimulacion. 	calculadoraDePresion := aCalculadoraDefaultDePresiones.	eventosSobrePozos := OrderedCollection new.		self configurarseEnElSimulador.! !!SistemaDeExtraccionDePozos methodsFor: 'private' stamp: 'JuanVanecek 5/7/2017 07:19'!assert: unPozoDeExtraccion estaConstruidoAl: unaFecha 		(simulador sistemaDeConstruccion estaConstruido: unPozoDeExtraccion al: unaFecha)		ifFalse: [ 			ConstruccionIncompleta signal: ('No se puede extraer producto de {1} porque al {2} no esta terminado aun' format: { unPozoDeExtraccion . unaFecha })			 ]! !!SistemaDeExtraccionDePozos methodsFor: 'private' stamp: 'JuanVanecek 5/7/2017 07:01'!configurarseEnElSimulador	simulador usarComoSistemaDeExtraccionA: self.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!SistemaDeExtraccionDePozos class	instanceVariableNames: ''!!SistemaDeExtraccionDePozos class methodsFor: 'Instance Creation' stamp: 'JuanVanecek 5/7/2017 06:44'!comoParteDe: unSistemaDeSimulacion calcuandoPresionCon: unaCalculadoraDefaultDePresiones 		^ self new		initializeComoParteDe: unSistemaDeSimulacion 		calcuandoPresionCon: unaCalculadoraDefaultDePresiones ! !'From Pharo5.0 of 16 April 2015 [Latest update: #50771] on 7 May 2017 at 8:01:34.790243 pm'!!Collection methodsFor: '*Tp1-Ing1-Modelo' stamp: 'JuanVanecek 5/7/2017 19:19'!sortedDescBy: aSelector 	^ (self sortedAscBy: aSelector) reverse! !'From Pharo5.0 of 16 April 2015 [Latest update: #50771] on 7 May 2017 at 8:01:34.790928 pm'!!Collection methodsFor: '*Tp1-Ing1-Modelo' stamp: 'JuanVanecek 5/7/2017 19:18'!sortedAscBy: aSelector 	^ self sorted: [:a :b | (a perform: aSelector) < (b perform: aSelector) ]! !